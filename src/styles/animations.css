/* ============================
   Props y keyframes globales
   ============================ */
@keyframes spin-border {
  to {
    --angle: 360deg
  }
}

@property --angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false
}

/* ============================
   Utilities
   ============================ */
@layer utilities {

  /* Reveal on scroll */
  .reveal {
    opacity: 0;
    transform: translateY(var(--anim-distance-reveal));
    transition: opacity var(--anim-duration-reveal) ease, transform var(--anim-duration-reveal) ease;
  }

  .reveal.show {
    opacity: 1;
    transform: none;
  }

  .nav-active {
    color: var(--primary) !important;
  }

  .nav-underline {
    position: relative;
  }

  .nav-underline::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: -4px;
    height: 2px;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    border-radius: 2px;
    transform: scaleX(0);
    transition: transform var(--trans);
  }

  .nav-active.nav-underline::after {
    transform: scaleX(1);
  }

  .menu-panel {
    transform: translateY(var(--anim-distance-menu));
    opacity: 0;
    transition: transform var(--trans), opacity var(--trans);
  }

  [data-state="open"] .menu-panel {
    transform: none;
    opacity: 1;
  }

  /* Animaciones base */
  .animate-float {
    animation: float var(--anim-duration-float) var(--anim-ease-in-out) infinite;
  }

  .animate-slide {
    animation: slide var(--anim-duration-slide) var(--anim-ease-linear) infinite;
  }

  .glow-pulse {
    box-shadow: var(--shadow);
  }

  .glow-pulse:hover,
  .glow-pulse:focus-within {
    animation: kt-shadow-pulse var(--anim-duration-pulse) var(--anim-ease-linear) infinite alternate;
  }

  @keyframes kt-shadow-pulse {
    0% {
      box-shadow: 0 8px 20px rgba(var(--ring), .22);
    }

    25% {
      box-shadow: 0 12px 24px rgba(var(--ring), .32);
    }

    50% {
      box-shadow: 0 16px 28px rgba(var(--ring), .40);
    }

    75% {
      box-shadow: 0 12px 24px rgba(var(--ring), .34);
    }

    100% {
      box-shadow: 0 8px 20px rgba(var(--ring), .22);
    }
  }

  @keyframes float {
    0% {
      transform: translateY(0);
    }

    50% {
      transform: translateY(var(--anim-distance-float));
    }

    100% {
      transform: translateY(0);
    }
  }

  @keyframes slide {
    0% {
      transform: translateX(0);
    }

    100% {
      transform: translateX(-50%);
    }
  }

  /* Helpers nuevos */
  .hover-rise {
    transition: transform var(--trans), box-shadow var(--trans);
  }

  .hover-rise:hover {
    transform: translateY(var(--anim-distance-hover));
    box-shadow: 0 12px 26px rgba(var(--ring), .35);
  }

  /* Compensación de anclas con header sticky */
  :where(main)>section {
    scroll-margin-top: 5rem;
  }

  /* Desvanecido para carruseles/marquee */
  .mask-edges {
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
  }

  /* ============================
     Moving border (conic + mask)
     ============================ */

  .rainbow-border-round {
    position: relative;
    overflow: hidden;
    border-radius: 30px;
    --rb: 2px;
    /* grosor del borde */
  }

  .rainbow-border-round::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 30px;
    padding: var(--rb);

    /* arco iris continuo que SIGUE las esquinas redondeadas */
    background:
      conic-gradient(from var(--angle),
        rgba(64, 171, 241, 1), var(--primary), var(--accent-2), var(--green-light), transparent, transparent, rgba(64, 171, 241, 1));

    /* recortamos a un ANILLO (outer - inner), respetando el border-radius */
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    mask-composite: exclude;

    animation: spin-border var(--anim-duration-spin) var(--anim-ease-linear) infinite;
  }

  /* capa interior (fondo del botón) */
  .rainbow-border-round::after {
    content: "";
    position: absolute;
    inset: var(--rb);
    border-radius: 30px;
    background: inherit;
    z-index: -1;
  }




}

/* Accesibilidad: respetar reduce motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: var(--anim-duration-reduced) !important;
    transition-duration: var(--anim-duration-reduced) !important;
  }

  .reveal,
  .hover-rise {
    transition: none !important;
    transform: none !important;
  }

  .animate-float,
  .animate-slide {
    animation: none !important;
  }

  .glow-pulse:hover,
  .glow-pulse:focus-within {
    animation: none !important;
  }

  .moving-border::before {
    animation: none !important;
  }
}